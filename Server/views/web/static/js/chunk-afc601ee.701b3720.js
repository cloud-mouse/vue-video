(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-afc601ee"],{8418:function(e,t,i){"use strict";var n=i("c04e"),s=i("9bf2"),r=i("5c6c");e.exports=function(e,t,i){var a=n(t);a in e?s.f(e,a,r(0,i)):e[a]=i}},"99af":function(e,t,i){"use strict";var n=i("23e7"),s=i("d039"),r=i("e8b5"),a=i("861d"),c=i("7b0b"),o=i("50c4"),u=i("8418"),l=i("65f0"),f=i("1dde"),d=i("b622"),v=i("2d00"),h=d("isConcatSpreadable"),g=9007199254740991,p="Maximum allowed index exceeded",m=v>=51||!s((function(){var e=[];return e[h]=!1,e.concat()[0]!==e})),_=f("concat"),b=function(e){if(!a(e))return!1;var t=e[h];return void 0!==t?!!t:r(e)},y=!m||!_;n({target:"Array",proto:!0,forced:y},{concat:function(e){var t,i,n,s,r,a=c(this),f=l(a,0),d=0;for(t=-1,n=arguments.length;t<n;t++)if(r=-1===t?a:arguments[t],b(r)){if(s=o(r.length),d+s>g)throw TypeError(p);for(i=0;i<s;i++,d++)i in r&&u(f,d,r[i])}else{if(d>=g)throw TypeError(p);u(f,d++,r)}return f.length=d,f}})},"9b7f":function(e,t,i){"use strict";var n=i("f3d7"),s=i.n(n);s.a},bc3f:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"movie-class"},[i("div",{staticClass:"classify-content"},[i("div",{staticClass:"fliter-box"},[i("div",{staticClass:"filter-item"},[i("span",[e._v("分类：")]),i("div",e._l(e.classList,(function(t){return i("label",{key:t._id,class:{active:e.current===t._id},on:{click:function(i){return e.setActive("class",t)}}},[e._v(e._s(t.name))])})),0)]),i("div",{staticClass:"filter-item"},[i("span",[e._v("种类：")]),i("div",[i("label",{class:{active:""===e.curType},on:{click:function(t){return e.setActive("type","")}}},[e._v("全部")]),e._l(e.currentClass.type,(function(t){return i("label",{key:t,class:{active:e.curType===t},on:{click:function(i){return e.setActive("type",t)}}},[e._v(e._s(t))])}))],2)]),i("div",{staticClass:"filter-item"},[i("span",[e._v("类型：")]),i("div",[i("label",{class:{active:""===e.curGenres},on:{click:function(t){return e.setActive("genres","")}}},[e._v("全部")]),e._l(e.currentClass.genres,(function(t){return i("label",{key:t,class:{active:e.curGenres===t},on:{click:function(i){return e.setActive("genres",t)}}},[e._v(e._s(t))])}))],2)])]),i("div",{staticClass:"movie-content"},[i("van-pull-refresh",{on:{refresh:e.onRefresh},model:{value:e.refreshing,callback:function(t){e.refreshing=t},expression:"refreshing"}},[i("van-list",{attrs:{finished:e.finished,"finished-text":"没有更多了"},on:{load:e.onLoad},model:{value:e.loading,callback:function(t){e.loading=t},expression:"loading"}},[e.movieList.length>0?i("div",{staticClass:"movie-list"},e._l(e.movieList,(function(t){return i("div",{key:t._id,staticClass:"movie-item",on:{click:function(i){return e.toDetail(t._id)}}},[i("img",{attrs:{src:t.cover,alt:""}}),i("div",{staticClass:"item-info"},[i("div",{staticClass:"item-name"},[e._v(e._s(t.name||"..."))])])])})),0):e._e()])],1)],1)])])},s=[],r=(i("99af"),i("96cf"),i("1da1")),a=i("fc91"),c={data:function(){return{loading:!1,finished:!1,refreshing:!1,current:0,currentClass:{},curType:"",curGenres:"",classList:[],movieList:[],currentPage:1,pageSize:10}},created:function(){this.currentId=this.$route.query.class_id,this.getMovieClass()},methods:{onLoad:function(){var e=this;setTimeout((function(){e.refreshing&&(e.currentPage=1,e.movieList=[],e.refreshing=!1),e.getList()}),2e3)},onRefresh:function(){this.finished=!1,this.loading=!0,this.onLoad()},getMovieClass:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,a["b"].getMovieClass().then((function(t){e.classList=t.data.list,e.current=t.data.list[0]._id,e.currentClass=t.data.list[0],e.getList()}));case 2:case"end":return t.stop()}}),t)})))()},getList:function(){var e=this;a["a"].getMovie({currentPage:this.currentPage,pageSize:this.pageSize,keywords:this.keywords,movie_class:this.current,movie_type:this.curType,movie_genres:this.curGenres}).then((function(t){e.loading=!1,1===e.currentPage?(e.movieList=t.data.list,e.currentPage+=1):0!==t.data.list.length?(e.movieList=e.movieList.concat(t.data.list),e.currentPage+=1):e.finished=!0}))},setActive:function(e,t){"class"===e?(this.current=t._id,this.currentClass=t):"type"===e?this.curType=t:this.curGenres=t,this.currentPage=1,this.getList()},toDetail:function(e){this.$router.push({path:"/movie/detail",query:{id:e}})},toSearch:function(){this.$router.push({path:"/search"})},toMovieList:function(e){this.$router.push({path:"/movieList?class_id=".concat(e)})}}},o=c,u=(i("9b7f"),i("2877")),l=Object(u["a"])(o,n,s,!1,null,null,null);t["default"]=l.exports},f3d7:function(e,t,i){},fc91:function(e,t,i){"use strict";i.d(t,"a",(function(){return s})),i.d(t,"b",(function(){return r})),i.d(t,"c",(function(){return a}));var n=i("b775"),s={getMovie:function(e){return Object(n["a"])({url:"/web-api/movie",method:"get",params:e})}},r={getMovieClass:function(e){return Object(n["a"])({url:"/web-api/movieClass",method:"get",params:e})}},a={getMovieEpisodes:function(e){return Object(n["a"])({url:"/web-api/movieEpisodes",method:"get",params:e})}}}}]);