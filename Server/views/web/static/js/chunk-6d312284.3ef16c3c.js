(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6d312284"],{1276:function(e,t,n){"use strict";var r=n("d784"),i=n("44e7"),s=n("825a"),a=n("1d80"),o=n("4840"),c=n("8aa5"),l=n("50c4"),u=n("14c3"),f=n("9263"),d=n("d039"),h=[].push,v=Math.min,g=4294967295,p=!d((function(){return!RegExp(g,"y")}));r("split",2,(function(e,t,n){var r;return r="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,n){var r=String(a(this)),s=void 0===n?g:n>>>0;if(0===s)return[];if(void 0===e)return[r];if(!i(e))return t.call(r,e,s);var o,c,l,u=[],d=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),v=0,p=new RegExp(e.source,d+"g");while(o=f.call(p,r)){if(c=p.lastIndex,c>v&&(u.push(r.slice(v,o.index)),o.length>1&&o.index<r.length&&h.apply(u,o.slice(1)),l=o[0].length,v=c,u.length>=s))break;p.lastIndex===o.index&&p.lastIndex++}return v===r.length?!l&&p.test("")||u.push(""):u.push(r.slice(v)),u.length>s?u.slice(0,s):u}:"0".split(void 0,0).length?function(e,n){return void 0===e&&0===n?[]:t.call(this,e,n)}:t,[function(t,n){var i=a(this),s=void 0==t?void 0:t[e];return void 0!==s?s.call(t,i,n):r.call(String(i),t,n)},function(e,i){var a=n(r,e,this,i,r!==t);if(a.done)return a.value;var f=s(e),d=String(this),h=o(f,RegExp),x=f.unicode,m=(f.ignoreCase?"i":"")+(f.multiline?"m":"")+(f.unicode?"u":"")+(p?"y":"g"),y=new h(p?f:"^(?:"+f.source+")",m),b=void 0===i?g:i>>>0;if(0===b)return[];if(0===d.length)return null===u(y,d)?[d]:[];var w=0,E=0,R=[];while(E<d.length){y.lastIndex=p?E:0;var k,C=u(y,p?d:d.slice(E));if(null===C||(k=v(l(y.lastIndex+(p?0:E)),d.length))===w)E=c(d,E,x);else{if(R.push(d.slice(w,E)),R.length===b)return R;for(var _=1;_<=C.length-1;_++)if(R.push(C[_]),R.length===b)return R;E=w=k}}return R.push(d.slice(w)),R}]}),!p)},"14c3":function(e,t,n){var r=n("c6b6"),i=n("9263");e.exports=function(e,t){var n=e.exec;if("function"===typeof n){var s=n.call(e,t);if("object"!==typeof s)throw TypeError("RegExp exec method returned something other than an Object or null");return s}if("RegExp"!==r(e))throw TypeError("RegExp#exec called on incompatible receiver");return i.call(e,t)}},"44e7":function(e,t,n){var r=n("861d"),i=n("c6b6"),s=n("b622"),a=s("match");e.exports=function(e){var t;return r(e)&&(void 0!==(t=e[a])?!!t:"RegExp"==i(e))}},4894:function(e,t,n){},6547:function(e,t,n){var r=n("a691"),i=n("1d80"),s=function(e){return function(t,n){var s,a,o=String(i(t)),c=r(n),l=o.length;return c<0||c>=l?e?"":void 0:(s=o.charCodeAt(c),s<55296||s>56319||c+1===l||(a=o.charCodeAt(c+1))<56320||a>57343?e?o.charAt(c):s:e?o.slice(c,c+2):a-56320+(s-55296<<10)+65536)}};e.exports={codeAt:s(!1),charAt:s(!0)}},8418:function(e,t,n){"use strict";var r=n("c04e"),i=n("9bf2"),s=n("5c6c");e.exports=function(e,t,n){var a=r(t);a in e?i.f(e,a,s(0,n)):e[a]=n}},"8aa5":function(e,t,n){"use strict";var r=n("6547").charAt;e.exports=function(e,t,n){return t+(n?r(e,t).length:1)}},"8dbb":function(e,t,n){"use strict";var r=n("4894"),i=n.n(r);i.a},9263:function(e,t,n){"use strict";var r=n("ad6d"),i=n("9f7f"),s=RegExp.prototype.exec,a=String.prototype.replace,o=s,c=function(){var e=/a/,t=/b*/g;return s.call(e,"a"),s.call(t,"a"),0!==e.lastIndex||0!==t.lastIndex}(),l=i.UNSUPPORTED_Y||i.BROKEN_CARET,u=void 0!==/()??/.exec("")[1],f=c||u||l;f&&(o=function(e){var t,n,i,o,f=this,d=l&&f.sticky,h=r.call(f),v=f.source,g=0,p=e;return d&&(h=h.replace("y",""),-1===h.indexOf("g")&&(h+="g"),p=String(e).slice(f.lastIndex),f.lastIndex>0&&(!f.multiline||f.multiline&&"\n"!==e[f.lastIndex-1])&&(v="(?: "+v+")",p=" "+p,g++),n=new RegExp("^(?:"+v+")",h)),u&&(n=new RegExp("^"+v+"$(?!\\s)",h)),c&&(t=f.lastIndex),i=s.call(d?n:f,p),d?i?(i.input=i.input.slice(g),i[0]=i[0].slice(g),i.index=f.lastIndex,f.lastIndex+=i[0].length):f.lastIndex=0:c&&i&&(f.lastIndex=f.global?i.index+i[0].length:t),u&&i&&i.length>1&&a.call(i[0],n,(function(){for(o=1;o<arguments.length-2;o++)void 0===arguments[o]&&(i[o]=void 0)})),i}),e.exports=o},"99af":function(e,t,n){"use strict";var r=n("23e7"),i=n("d039"),s=n("e8b5"),a=n("861d"),o=n("7b0b"),c=n("50c4"),l=n("8418"),u=n("65f0"),f=n("1dde"),d=n("b622"),h=n("2d00"),v=d("isConcatSpreadable"),g=9007199254740991,p="Maximum allowed index exceeded",x=h>=51||!i((function(){var e=[];return e[v]=!1,e.concat()[0]!==e})),m=f("concat"),y=function(e){if(!a(e))return!1;var t=e[v];return void 0!==t?!!t:s(e)},b=!x||!m;r({target:"Array",proto:!0,forced:b},{concat:function(e){var t,n,r,i,s,a=o(this),f=u(a,0),d=0;for(t=-1,r=arguments.length;t<r;t++)if(s=-1===t?a:arguments[t],y(s)){if(i=c(s.length),d+i>g)throw TypeError(p);for(n=0;n<i;n++,d++)n in s&&l(f,d,s[n])}else{if(d>=g)throw TypeError(p);l(f,d++,s)}return f.length=d,f}})},"9f7f":function(e,t,n){"use strict";var r=n("d039");function i(e,t){return RegExp(e,t)}t.UNSUPPORTED_Y=r((function(){var e=i("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),t.BROKEN_CARET=r((function(){var e=i("^r","gy");return e.lastIndex=2,null!=e.exec("str")}))},a15b:function(e,t,n){"use strict";var r=n("23e7"),i=n("44ad"),s=n("fc6a"),a=n("a640"),o=[].join,c=i!=Object,l=a("join",",");r({target:"Array",proto:!0,forced:c||!l},{join:function(e){return o.call(s(this),void 0===e?",":e)}})},ac1f:function(e,t,n){"use strict";var r=n("23e7"),i=n("9263");r({target:"RegExp",proto:!0,forced:/./.exec!==i},{exec:i})},ad6d:function(e,t,n){"use strict";var r=n("825a");e.exports=function(){var e=r(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},d784:function(e,t,n){"use strict";n("ac1f");var r=n("6eeb"),i=n("d039"),s=n("b622"),a=n("9263"),o=n("9112"),c=s("species"),l=!i((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})),u=function(){return"$0"==="a".replace(/./,"$0")}(),f=s("replace"),d=function(){return!!/./[f]&&""===/./[f]("a","$0")}(),h=!i((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2!==n.length||"a"!==n[0]||"b"!==n[1]}));e.exports=function(e,t,n,f){var v=s(e),g=!i((function(){var t={};return t[v]=function(){return 7},7!=""[e](t)})),p=g&&!i((function(){var t=!1,n=/a/;return"split"===e&&(n={},n.constructor={},n.constructor[c]=function(){return n},n.flags="",n[v]=/./[v]),n.exec=function(){return t=!0,null},n[v](""),!t}));if(!g||!p||"replace"===e&&(!l||!u||d)||"split"===e&&!h){var x=/./[v],m=n(v,""[e],(function(e,t,n,r,i){return t.exec===a?g&&!i?{done:!0,value:x.call(t,n,r)}:{done:!0,value:e.call(n,t,r)}:{done:!1}}),{REPLACE_KEEPS_$0:u,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:d}),y=m[0],b=m[1];r(String.prototype,e,y),r(RegExp.prototype,v,2==t?function(e,t){return b.call(e,this,t)}:function(e){return b.call(e,this)})}f&&o(RegExp.prototype[v],"sham",!0)}},efe3:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"search"},[n("div",{staticClass:"search-box"},[n("van-search",{ref:"searchInput",attrs:{shape:"round",background:"#fff",placeholder:"搜索视频"},on:{blur:e.doSearch},model:{value:e.keywords,callback:function(t){e.keywords=t},expression:"keywords"}})],1),n("div",{staticClass:"search-content"},[e.showResult?e._e():n("div",{staticClass:"search-history"},[n("div",{staticClass:"title"},[n("span",[e._v("搜索历史")]),n("span",{staticClass:"remove-all",on:{click:e.showConfirm}},[n("van-icon",{attrs:{name:"delete-o"}}),e._v("清空历史")],1)]),n("div",{staticClass:"history-keys"},e._l(e.searchHistory,(function(t,r){return n("div",{key:r,staticClass:"history-key",on:{click:function(n){return e.setKeywords(t)}}},[e._v(" "+e._s(t)+" ")])})),0)]),e.showResult?n("div",{staticClass:"search-result"},[n("van-pull-refresh",{on:{refresh:e.onRefresh},model:{value:e.refreshing,callback:function(t){e.refreshing=t},expression:"refreshing"}},[n("van-list",{attrs:{finished:e.finished,"finished-text":"没有更多了"},on:{load:e.onLoad},model:{value:e.loading,callback:function(t){e.loading=t},expression:"loading"}},[e.movieList.length>0?n("div",{staticClass:"movie-list"},e._l(e.movieList,(function(t){return n("div",{key:t._id,staticClass:"movie-item",on:{click:function(n){return e.toDetail(t._id)}}},[n("img",{attrs:{src:t.cover,alt:""}}),n("div",{staticClass:"item-info"},[n("div",{staticClass:"item-name"},[e._v(e._s(t.name||"..."))])])])})),0):e._e()])],1)],1):e._e()])])},i=[],s=(n("99af"),n("c975"),n("a15b"),n("ac1f"),n("1276"),n("e17f"),n("2241")),a=n("fc91"),o={name:"Search",data:function(){return{loading:!1,finished:!1,refreshing:!1,keywords:"",searchHistory:[],showResult:!1,movieList:[],currentPage:1,pageSize:10}},watch:{keywords:function(e,t){this.showResult=!!e}},created:function(){var e=localStorage.getItem("search-history");e&&(this.searchHistory=e.split(","))},mounted:function(){var e=this;this.$nextTick((function(){e.$refs.searchInput.focus()}))},methods:{onLoad:function(){var e=this;setTimeout((function(){e.refreshing&&(e.currentPage=1,e.movieList=[],e.refreshing=!1),e.getList()}),2e3)},showConfirm:function(){var e=this;s["a"].confirm({title:"提示",message:"是否要清空搜索历史?",confirmButtonColor:"#335eea",confirmButtonText:"清空"}).then((function(){localStorage.removeItem("search-history"),e.searchHistory=[]})).catch((function(){}))},onRefresh:function(){this.finished=!1,this.loading=!0,this.onLoad()},setKeywords:function(e){this.keywords=e},toDetail:function(e){this.$router.push({path:"/movie/detail",query:{id:e}})},doSearch:function(){-1===this.searchHistory.indexOf(this.keywords)&&this.searchHistory.push(this.keywords),localStorage.setItem("search-history",this.searchHistory.join(",")),this.showResult=!0},getList:function(){var e=this;a["a"].getMovie({currentPage:this.currentPage,pageSize:this.pageSize,keywords:this.keywords}).then((function(t){e.loading=!1,1===e.currentPage?(e.movieList=t.data.list,e.currentPage+=1):0!==t.data.list.length?(e.movieList=e.movieList.concat(t.data.list),e.currentPage+=1):e.finished=!0}))}}},c=o,l=(n("8dbb"),n("2877")),u=Object(l["a"])(c,r,i,!1,null,"348b2cb9",null);t["default"]=u.exports},fc91:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return a}));var r=n("b775"),i={getMovie:function(e){return Object(r["a"])({url:"/web-api/movie",method:"get",params:e})}},s={getMovieClass:function(e){return Object(r["a"])({url:"/web-api/movieClass",method:"get",params:e})}},a={getMovieEpisodes:function(e){return Object(r["a"])({url:"/web-api/movieEpisodes",method:"get",params:e})}}}}]);