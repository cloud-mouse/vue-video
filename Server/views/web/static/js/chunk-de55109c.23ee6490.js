(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-de55109c"],{"3db4":function(e,t,i){},5582:function(e,t,i){"use strict";var n=i("c51a"),a=i.n(n);a.a},c51a:function(e,t,i){},cbb3:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"video-detail"},[i("div",{staticClass:"video-box"},[i("d-player",{ref:"player",attrs:{autoplay:e.autoplay,video:e.video},on:{play:e.play}})],1),i("div",{staticClass:"video-content"},[i("div",{staticClass:"head-title"},[i("div",{staticClass:"mv-cell"},[i("span",{staticClass:"mv-name"},[e._v(e._s(e.movieDetail.name)),i("span",{staticClass:"mv-recommend"},[e._v("("+e._s("1"===e.movieDetail.recommend?"已完结":"连载中")+")")])]),i("span",{on:{click:function(t){e.showProfile=!0}}},[e._v("简介 "),i("van-icon",{attrs:{name:"arrow"}})],1)]),i("div",{staticClass:"mv-info"},[e.movieDetail.movieClass?i("span",{staticClass:"mv-class"},[e._v("分类："+e._s(e.movieDetail.movieClass.name)+" |")]):e._e(),i("span",{staticClass:"mv-uptime"},[e._v(" 更新时间："+e._s(e._f("timeFormat")(e.movieDetail.updateTime)))])])]),i("div",{staticClass:"mv-episodes"},[i("div",{staticClass:"head-title"},[i("span",[e._v("剧集")]),i("span",{on:{click:function(t){e.showAllEpisodes=!0}}},[e._v("查看全部 "),i("van-icon",{attrs:{name:"arrow"}})],1)]),i("div",{staticClass:"episodes-list"},e._l(e.movieEpisodes,(function(t,n){return i("div",{key:n,class:["episodes-item",e.currentIndex===n?"active":""],on:{click:function(i){return e.setCurrent(t,n)}}},[e._v(" "+e._s(n+1)+" ")])})),0)])]),i("van-popup",{staticStyle:{height:"40%"},attrs:{closeable:"",round:"",position:"bottom"},on:{close:function(t){e.showProfile=!1}},model:{value:e.showProfile,callback:function(t){e.showProfile=t},expression:"showProfile"}},[i("div",{staticClass:"title"},[e._v("简介")]),i("div",{staticClass:"description",domProps:{innerHTML:e._s(e.movieDetail.description)}})]),i("van-popup",{staticStyle:{height:"40%"},attrs:{closeable:"",round:"",position:"bottom"},on:{close:function(t){e.showAllEpisodes=!1}},model:{value:e.showAllEpisodes,callback:function(t){e.showAllEpisodes=t},expression:"showAllEpisodes"}},[i("div",{staticClass:"episodes-all"},e._l(e.movieEpisodes,(function(t,n){return i("div",{key:n,class:["episodes-item",e.currentIndex===n?"active":""],on:{click:function(i){return e.setCurrent(t,n)}}},[e._v(" "+e._s(n+1)+" ")])})),0)])],1)},a=[],o=(i("99af"),i("b0c0"),i("96cf"),i("1da1")),s=i("fc91"),r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"dplayer"})},l=[],c=i("f7a5"),u=i.n(c),d={props:{autoplay:{type:Boolean,default:!1},video:{type:Object,default:function(){}}},data:function(){return{dp:null}},mounted:function(){var e=this;this.$nextTick((function(){e._initPlayer()})),document.querySelector(".dplayer-menu").remove(),document.querySelector(".dplayer-mask").remove(),document.querySelector(".dplayer-info-panel-item-url").remove()},methods:{_initPlayer:function(){var e=this,t=this.dp=new u.a({element:this.$el,mutex:!1,theme:"#335eea",loop:!1,lang:"zh-cn",screenshot:!0,hotkey:!0,preload:!0,volume:.7,autoplay:this.autoplay,video:{pic:this.video.pic,url:this.video.url,type:this.video.type}});t.on("play",(function(){e.$emit("play")})),t.on("quality_start",(function(){e.$emit("quality_start"),t.on("play")})),t.on("pause",(function(){e.$emit("pause")})),t.on("canplay",(function(){e.$emit("canplay")})),t.on("playing",(function(){e.$emit("playing")})),t.on("ended",(function(){e.$emit("ended")})),t.on("error",(function(){e.$emit("error")}))}}},p=d,v=(i("5582"),i("2877")),m=Object(v["a"])(p,r,l,!1,null,null,null),f=m.exports,h=(i("a623"),i("4160"),i("c975"),i("a15b"),i("d81d"),i("fb6a"),i("b64b"),i("d3b7"),i("4d63"),i("ac1f"),i("25f0"),i("466d"),i("4d90"),i("5319"),i("841c"),i("1276"),i("159b"),i("5530"),i("15fd"),i("53ca"));function y(e,t){if(0===arguments.length)return null;var i,n=t||"{y}-{m}-{d} {h}:{i}:{s}";"object"===Object(h["a"])(e)?i=e:("string"===typeof e&&(e=/^[0-9]+$/.test(e)?parseInt(e):e.replace(new RegExp(/-/gm),"/")),"number"===typeof e&&10===e.toString().length&&(e*=1e3),i=new Date(e));var a={y:i.getFullYear(),m:i.getMonth()+1,d:i.getDate(),h:i.getHours(),i:i.getMinutes(),s:i.getSeconds(),a:i.getDay()},o=n.replace(/{([ymdhisa])+}/g,(function(e,t){var i=a[t];return"a"===t?["日","一","二","三","四","五","六"][i]:i.toString().padStart(2,"0")}));return o}function g(e,t){e=10===(""+e).length?1e3*parseInt(e):+e;var i=new Date(e),n=Date.now(),a=(n-i)/1e3;return a<30?"刚刚":a<3600?Math.ceil(a/60)+"分钟前":a<86400?Math.ceil(a/3600)+"小时前":a<172800?"1天前":t?y(e,t):i.getMonth()+1+"月"+i.getDate()+"日"+i.getHours()+"时"+i.getMinutes()+"分"}var b={name:"VideoDetail",components:{"d-player":f},filters:{timeFormat:function(e){return g(new Date(e))}},data:function(){return{movieDetail:{},video:{pic:"",url:"",type:"hls"},autoplay:!0,player:null,showProfile:!1,showAllEpisodes:!1,currentIndex:0,movieEpisodes:[],count:0}},mounted:function(){this._initData()},methods:{play:function(){console.log("开始播放...")},_initData:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,s["a"].getMovie({id:e.$route.query.id}).then((function(t){e.movieDetail=t.data,e.video.pic=t.data.cover}));case 2:return t.next=4,s["c"].getMovieEpisodes({movie_id:e.$route.query.id}).then((function(t){e.movieEpisodes=t.data.list,e.count=t.data.count,e.video.url=t.data.list[0].url,e.$nextTick((function(){e.$refs.player._initPlayer()})),document.title="".concat(e.movieDetail.name," - ").concat(t.data.list[0].name)}));case 4:case"end":return t.stop()}}),t)})))()},setCurrent:function(e,t){var i=this;this.video.url=e.url,this.$nextTick((function(){i.$refs.player._initPlayer()})),document.title="".concat(this.movieDetail.name," - ").concat(e.name),this.currentIndex=t,this.showAllEpisodes=!1}}},_=b,w=(i("eee6"),Object(v["a"])(_,n,a,!1,null,null,null));t["default"]=w.exports},eee6:function(e,t,i){"use strict";var n=i("3db4"),a=i.n(n);a.a},fc91:function(e,t,i){"use strict";i.d(t,"a",(function(){return a})),i.d(t,"b",(function(){return o})),i.d(t,"c",(function(){return s}));var n=i("b775"),a={getMovie:function(e){return Object(n["a"])({url:"/web-api/movie",method:"get",params:e})}},o={getMovieClass:function(e){return Object(n["a"])({url:"/web-api/movieClass",method:"get",params:e})}},s={getMovieEpisodes:function(e){return Object(n["a"])({url:"/web-api/movieEpisodes",method:"get",params:e})}}}}]);